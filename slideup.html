<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  /* =======================================================================
     Pikaso Design Tokens — Inlined for Braze iframe isolation
     Based on Figma: CRM - Inapps
       Light: node 88-224  |  Dark: node 85-147
     Theme-aware: detects light/dark from parent app
     Variant: slideup (toast notification, bottom-anchored, frosted glass)
     ======================================================================= */

  @font-face {
    font-family: 'Inter';
    src: url('https://pikaso.cdnpk.net/public/media/Inter-Regular.woff2') format('woff2'),
         url('https://pikaso.cdnpk.net/public/media/Inter-Regular.woff') format('woff');
    font-weight: 400;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: 'Inter';
    src: url('https://pikaso.cdnpk.net/public/media/Inter-SemiBold.woff2') format('woff2'),
         url('https://pikaso.cdnpk.net/public/media/Inter-SemiBold.woff') format('woff');
    font-weight: 600;
    font-style: normal;
    font-display: swap;
  }

  /* =====================================================================
     Light theme (default) — Figma node 88-224
     ===================================================================== */
  :root {
    --toast-font: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    --toast-max-width: 340px;
    --toast-radius: 16px;                            /* --border-radius-rounded-2xl */
    --toast-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
    --toast-blur: 28px;                              /* --blur-3xl (56px) / 2 */

    /* Frosted glass */
    --toast-bg: rgba(229, 229, 229, 0.50);           /* --alert-base */
    --toast-border: rgba(13, 13, 13, 0.20);          /* --outline-border-alpha-0 */

    /* Foregrounds */
    --toast-title-color: #0D0D0D;                    /* --surface-foreground-0 */
    --toast-text-color: #424242;                     /* --surface-foreground-2 */
    --toast-icon-color: #0D0D0D;                     /* --surface-foreground-0 */

    /* Close button */
    --toast-close-color: #424242;                    /* --surface-foreground-2 */
    --toast-close-color-hover: #0D0D0D;              /* --surface-foreground-0 */

    /* Action button — secondary solid */
    --toast-action-bg: #0D0D0D;                      /* --secondary-0 */
    --toast-action-bg-hover: #424242;                /* --secondary-0 lightened */
    --toast-action-bg-active: #5b5b5b;
    --toast-action-color: #FFFFFF;
  }

  /* =====================================================================
     Dark theme — Figma node 85-147
     ===================================================================== */
  .dark {
    --toast-bg: rgba(15, 15, 15, 0.50);              /* --alert-base */
    --toast-border: rgba(255, 255, 255, 0.20);       /* --outline-border-alpha-0 */

    --toast-title-color: #F7F7F7;                    /* --surface-foreground-0 */
    --toast-text-color: #B1B1B1;                     /* --surface-foreground-2 */
    --toast-icon-color: #F7F7F7;

    --toast-close-color: #B1B1B1;
    --toast-close-color-hover: #F7F7F7;

    --toast-action-bg: #F7F7F7;                      /* --secondary-0 */
    --toast-action-bg-hover: #E5E5E5;
    --toast-action-bg-active: #D8D8D8;
    --toast-action-color: #0D0D0D;
  }

  /* =======================================================================
     Reset & Base
     ======================================================================= */

  *, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: var(--toast-font);
    font-size: 16px;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* =======================================================================
     Toast Container — fixed bottom, centered
     ======================================================================= */

  .braze-toast-anchor {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    padding: 16px;
    z-index: 9999;
    pointer-events: none;
  }

  /* =======================================================================
     Toast Card — frosted glass
     ======================================================================= */

  .braze-toast {
    position: relative;
    width: 100%;
    max-width: var(--toast-max-width);
    padding: 16px;
    background: var(--toast-bg);
    -webkit-backdrop-filter: blur(var(--toast-blur));
    backdrop-filter: blur(var(--toast-blur));
    border: 1px solid var(--toast-border);
    border-radius: var(--toast-radius);
    box-shadow: var(--toast-shadow);
    pointer-events: auto;

    opacity: 0;
    transform: translateY(100%);
    animation: slideUp 0.35s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  /* =======================================================================
     Header — icon + title row + close button
     ======================================================================= */

  .braze-toast__header {
    display: flex;
    align-items: flex-start;
    gap: 10px;
  }

  .braze-toast__icon {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    color: var(--toast-icon-color);
    margin-top: 1px;
  }

  .braze-toast__icon svg {
    width: 100%;
    height: 100%;
  }

  .braze-toast__title {
    flex: 1;
    font-size: 0.875rem;         /* 14px — text-sm */
    font-weight: 600;            /* semibold */
    line-height: 1.6;            /* 160% → 22.4px */
    color: var(--toast-title-color);
    min-width: 0;
  }

  /* =======================================================================
     Close Button
     ======================================================================= */

  .braze-toast__close {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--toast-close-color);
    transition: color 0.15s ease;
    padding: 0;
    margin: 0;
  }

  .braze-toast__close:hover {
    color: var(--toast-close-color-hover);
  }

  .braze-toast__close svg {
    width: 16px;
    height: 16px;
  }

  /* =======================================================================
     Body Text
     ======================================================================= */

  .braze-toast__text {
    font-size: 0.75rem;          /* 12px — text-xs */
    font-weight: 400;            /* regular */
    line-height: 1.6;            /* 160% → 19.2px */
    color: var(--toast-text-color);
    margin-top: 4px;
    padding-left: 34px;          /* icon 24 + gap 10 */
  }

  /* =======================================================================
     Action Button — secondary solid (Perita Plus sm)
     ======================================================================= */

  .braze-toast__action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 32px;
    padding: 0 12px;
    font-family: var(--toast-font);
    font-size: 0.75rem;          /* 12px — text-xs */
    font-weight: 600;
    line-height: 1;
    color: var(--toast-action-color);
    background: var(--toast-action-bg);
    border: none;
    border-radius: 8px;          /* --border-radius-rounded-lg */
    cursor: pointer;
    text-decoration: none;
    transition: background 0.15s ease-in-out;
    white-space: nowrap;
    margin-top: 12px;
    margin-left: 34px;           /* icon 24 + gap 10 */
  }

  .braze-toast__action:hover {
    background: var(--toast-action-bg-hover);
  }

  .braze-toast__action:active {
    background: var(--toast-action-bg-active);
  }

  /* =======================================================================
     Animations
     ======================================================================= */

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideDown {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(100%);
    }
  }

  .braze-toast--closing {
    animation: slideDown 0.2s ease-in forwards;
  }

  /* =======================================================================
     Responsive — full-width on very small screens
     ======================================================================= */

  @media (max-width: 375px) {
    .braze-toast-anchor {
      padding: 12px;
    }

    .braze-toast {
      max-width: 100%;
    }
  }
</style>
</head>
<body>
  <!--
    Braze Custom HTML In-App Message Template: Slideup (Toast)
    ===========================================================
    Design source: Figma CRM - Inapps (light: 88-224, dark: 85-147)
    Theme: auto-detects light/dark from parent app
    Translations: Lokalise via connected_content (built-in)

    To use this template:
      1. Replace TITLE_KEY, MESSAGE_KEY, CTA_KEY below with your Lokalise keys
      2. Optionally set ${cta_url} as a Braze message extra for the action button
  -->

  <!-- =====================================================================
       Lokalise translations: only user language + English fallback (2 requests).
       Language detected via Braze ${language} attribute (set by setLanguage() in app).
       ===================================================================== -->
  {%- assign lang = ${language} | default: 'en' -%}
  {%- case lang -%}
    {%- when 'es' -%}{%- assign lok_lang = 'es_ES' -%}
    {%- when 'pt' -%}{%- assign lok_lang = 'pt_BR' -%}
    {%- when 'de' -%}{%- assign lok_lang = 'de_DE' -%}
    {%- when 'fr' -%}{%- assign lok_lang = 'fr_FR' -%}
    {%- when 'it' -%}{%- assign lok_lang = 'it_IT' -%}
    {%- when 'ru' -%}{%- assign lok_lang = 'ru_RU' -%}
    {%- when 'ja' -%}{%- assign lok_lang = 'ja_JP' -%}
    {%- when 'ko' -%}{%- assign lok_lang = 'ko_KR' -%}
    {%- when 'nl' -%}{%- assign lok_lang = 'nl_NL' -%}
    {%- when 'pl' -%}{%- assign lok_lang = 'pl_PL' -%}
    {%- when 'zh' -%}{%- assign lok_lang = 'zh_HK' -%}
    {%- when 'hi' -%}{%- assign lok_lang = 'hi_IN' -%}
    {%- when 'cs' -%}{%- assign lok_lang = 'cs_CZ' -%}
    {%- when 'da' -%}{%- assign lok_lang = 'da_DK' -%}
    {%- when 'fi' -%}{%- assign lok_lang = 'fi_FI' -%}
    {%- when 'nb' -%}{%- assign lok_lang = 'nb_NO' -%}
    {%- when 'sv' -%}{%- assign lok_lang = 'sv_SE' -%}
    {%- when 'tr' -%}{%- assign lok_lang = 'tr_TR' -%}
    {%- when 'id' -%}{%- assign lok_lang = 'id_ID' -%}
    {%- when 'vi' -%}{%- assign lok_lang = 'vi_VN' -%}
    {%- when 'th' -%}{%- assign lok_lang = 'th_TH' -%}
    {%- else -%}{%- assign lok_lang = 'en' -%}
  {%- endcase -%}
  {%- assign base = 'https://exports.live.lokalise.cloud/braze/64903509694141adaff9b6.83125809/a4597de8e0ea203a9d9cc0266d7f1fed9fa4a0c1/' -%}
  {%- connected_content {{ base }}en.json :save t_en :cache_max_age 3600 -%}
  {%- if t_en == null -%}{%- abort_message("Lokalise EN fallback failed") -%}{%- endif -%}
  {%- if lok_lang != 'en' -%}
    {%- assign json_url = base | append: lok_lang | append: '.json' -%}
    {%- connected_content {{ json_url }} :save t :cache_max_age 3600 -%}
  {%- else -%}
    {%- assign t = t_en -%}
  {%- endif -%}

  <div class="braze-toast-anchor" id="brazeToastAnchor">
    <div class="braze-toast" id="brazeToast" role="alert" aria-live="assertive">

      <!-- Header: icon + title + close -->
      <div class="braze-toast__header">
        <span class="braze-toast__icon" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
            <path d="M13.73 21a2 2 0 0 1-3.46 0" />
          </svg>
        </span>
        <h2 class="braze-toast__title" id="brazeToastTitle">{{ t.TITLE_KEY | default: t_en.TITLE_KEY }}</h2>
        <button
          class="braze-toast__close"
          id="brazeToastClose"
          aria-label="Close"
          type="button"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="4" y1="4" x2="12" y2="12" />
            <line x1="12" y1="4" x2="4" y2="12" />
          </svg>
        </button>
      </div>

      <!-- Body text -->
      <p class="braze-toast__text">{{ t.MESSAGE_KEY | default: t_en.MESSAGE_KEY }}</p>

      <!-- Action CTA -->
      <a
        class="braze-toast__action"
        id="brazeToastAction"
        href="${cta_url}"
        role="button"
      >
        {{ t.CTA_KEY | default: t_en.CTA_KEY }}
      </a>

    </div>
  </div>

  <script>
    (function () {
      /* -----------------------------------------------------------------
         Theme detection
         Reads the parent document's <html> class to match the app theme.
         Falls back to light mode if parent is inaccessible (cross-origin).
         ----------------------------------------------------------------- */
      try {
        var parentDoc = window.parent.document.documentElement;
        if (parentDoc && parentDoc.classList.contains('dark')) {
          document.documentElement.classList.add('dark');
        }
      } catch (e) {}

      /* -----------------------------------------------------------------
         Close toast with slide-down animation
         ----------------------------------------------------------------- */
      function closeToast() {
        var toast = document.getElementById('brazeToast');
        if (!toast) return;

        toast.classList.add('braze-toast--closing');

        toast.addEventListener('animationend', function () {
          if (typeof brazeBridge !== 'undefined') {
            brazeBridge.closeMessage();
          }
        });

        setTimeout(function () {
          if (typeof brazeBridge !== 'undefined') {
            brazeBridge.closeMessage();
          }
        }, 300);
      }

      /* -----------------------------------------------------------------
         Close button
         ----------------------------------------------------------------- */
      var closeBtn = document.getElementById('brazeToastClose');
      if (closeBtn) {
        closeBtn.addEventListener('click', function (e) {
          e.preventDefault();
          closeToast();
        });
      }

      /* -----------------------------------------------------------------
         Action button — log click and navigate
         ----------------------------------------------------------------- */
      var actionBtn = document.getElementById('brazeToastAction');
      if (actionBtn) {
        actionBtn.addEventListener('click', function (e) {
          e.preventDefault();
          var url = actionBtn.getAttribute('href');

          if (typeof brazeBridge !== 'undefined') {
            brazeBridge.logClick();
          }

          if (url && url !== '${cta_url}' && url.trim() !== '') {
            window.parent.location.href = url;
          }

          closeToast();
        });
      }

      /* -----------------------------------------------------------------
         Escape key to close
         ----------------------------------------------------------------- */
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' || e.keyCode === 27) {
          closeToast();
        }
      });
    })();
  </script>
</body>
</html>
